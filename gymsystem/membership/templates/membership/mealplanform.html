<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Meal Plan Form</title>
	<!-- <link rel="stylesheet" href="../../static/css/rannualexpired.css"> -->
	<!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous"> -->
	<link rel="stylesheet" href="../../static/css/mealplanform.css">  
	<!-- Fonts -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&family=Poppins:wght@300;500;600;700;800&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Kanit:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Hind:wght@300;400;500;600;700&family=Kanit:wght@100&family=Yantramanav:wght@400;500;700;900&display=swap" rel="stylesheet">
	<!-- For icons -->
	<link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
	<script src="https://kit.fontawesome.com/883a3b87d9.js" crossorigin="anonymous"></script>
</head>

<body>
	<div id="content", name="content">
		<div class="grid_container">
			{% if request.user.is_authenticated %}

			<!-- Sidebar Container -->
			<div class="sidebar_container">
				<div class="top_container">
					<div class="top_logo_container">
						<img src="../../static/files/monster-logo.png" alt="">
						<span>Monster Gym</span>
					</div>
					<i class='bx bx-menu' id="btn"></i>
				</div>
				<div class="user_container">
					<i class='bx bx-user-pin'></i>
					<div class="profile_name_container">
						<p class="name_bold">{{user.user_name}}</p>
						<p>Member</p>
					</div>
				</div>
				<ul>
					<li>
						<a href="/mealplanform">
							<i class='bx bx-food-menu'></i>
							<span class="sidebar_item">Start Meal Planner</span>
						</a>
						<span class="tip">Start Meal Planner</span>
					</li>
					<li>
						<a href="/signout">
							<i class='bx bx-log-out'></i>
							<span class="sidebar_item">Signout</span>
						</a>
						<span class="tip">Signout</span>
					</li>	
				</ul>
				</div>

			<!-- Main Section -->

				<!-- Form Meal Planner -->

				<div class="main_content">
					<div class="content1_title">
						<h2>New week new meal plan. Create your weekly plans!</h2>
						<p>Please fill out the form</p>
					</div>
					<div class="content1">
						<div class="form_content">
							<form class="form_group" method="POST" action="">
								{% csrf_token %}
									<label for="height">Height:</label>
									<input type="number" name="height" placeholder="Height in cm" value="{{ height }}" required>
									<br>
									<label for="weight">Weight:</label>
									<input type="number" name="weight" placeholder="Weight in kg" value="{{ weight }}" required>
									<br>
									<label for="age">Age:</label>
									<input type="number" name="age" placeholder="Age" value="{{ age }}" required>
									<br>
									<label for="weight_plan">Weight Plan:</label>
									<select name="weight_plan" required>
										<option value="Gain weight">Gain weight</option>
										<option value="Maintain weight">Maintain weight</option>
										<option value="Lose weight">Lose weight</option>
									</select>
									<br>
									<label for="activity_level">Activity Level:</label>
									<select name="activity_level" required>
										<option value="Inactive">Inactive</option>
										<option value="Lightly Active">Lightly Active</option>
										<option value="Active">Active</option>
										<option value="Very Active">Very Active</option>
									</select>
									<br>
									<label for="num_days">Number of Days:</label>
									<select name="num_days" required>
										<option value="1">1</option>
										<option value="2">2</option>
										<option value="3">3</option>
										<option value="4">4</option>
										<option value="5">5</option>
										<option value="6">6</option>
										<option value="7">7</option>
									</select>
										<div class="buttons_container">
											<button type="submit">Generate Meal Plan</button>
											<button class="btn2" type="button"><a href="/home"> Go Back</a></button>
										</div>
							</form>
						</div>
	
						<div class="cover_content">
							<img src="../../static/files/meal-planner-cover.jpg" alt="">
						</div>
					</div>
				
				<br>

				<div class="content2">
					<br>
					
					{% if meals %}
					  <br>
					  {% with total_calories=0 %}
						<a class="download" href="{% url 'generate_pdf' %}?target_calories={{ target_calories }}" download="meal_plan.pdf">Download Meal Plan as PDF</a>
						{% for meal in meals %}
						  <div class="day_container">
							<br>
							<h2>Day {{ meal.day }}</h2>
							{% with meal_calories=meal.breakfast.calories|add:meal.lunch.calories|add:meal.dinner.calories %}
							  {% with total_calories=total_calories|add:meal_calories %}
								<p>Targeted Calories: {{ target_calories|default:0|floatformat:0 }}</p>
								<p>Total Calories of 3 Meals: {{ total_calories }}</p>
							  {% endwith %}
							{% endwith %}
							<div class="food_container">
							  <div class="foodies">
								<div class="food-img_container">
								  <img src="{{ meal.breakfast.image_path }}" alt="{{ meal.breakfast.name }}">
								  <div class="food-time">Breakfast</div>
								</div>
								<div class="meal-details">
								  <h3>{{ meal.breakfast.name }}</h3>
								  <hr>
								  <div class="meal-information">
									<p>Servings: {{ meal.breakfast.servings|default:1|floatformat:0 }}</p>
									<p>Calories: {{ meal.breakfast.calories }} kcal</p>
									<p>Protein: {{ meal.breakfast.protein }} g</p>
									<p>Fat: {{ meal.breakfast.fat }} g</p>
									<p>Carbs: {{ meal.breakfast.carbs }} g</p>
								  </div>
								  <hr>
								  <div class="view-recipe_container">
									<p><a href="{{ meal.breakfast.instructions_link }}" target="_blank"><i class='bx bx-search-alt-2'></i>View Recipe</a></p>
								  </div>
								</div>
							  </div>
							  <div class="foodies">
								<div class="food-img_container">
								  <img src="{{ meal.lunch.image_path }}" alt="{{ meal.lunch.name }}">
								  <div class="food-time">Lunch</div>
								</div>
								<div class="meal-details">
								  <h3>{{ meal.lunch.name }}</h3>
								  <hr>
								  <div class="meal-information">
									<p>Servings: {{ meal.lunch.servings|default:1|floatformat:0 }}</p>
									<p>Calories: {{ meal.lunch.calories }} kcal</p>
									<p>Protein: {{ meal.lunch.protein }} g</p>
									<p>Fat: {{ meal.lunch.fat }} g</p>
									<p>Carbs: {{ meal.lunch.carbs }} g</p>
								  </div>
								  <hr>
								  <div class="view-recipe_container">
									<p><a href="{{ meal.lunch.instructions_link }}" target="_blank"><i class='bx bx-search-alt-2'></i>View Recipe</a></p>
								  </div>
								</div>
							  </div>
							  <div class="foodies">
								<div class="food-img_container">
								  <img src="{{ meal.dinner.image_path }}" alt="{{ meal.dinner.name }}">
								  <div class="food-time">Dinner</div>
								</div>
								<div class="meal-details">
								  <h3>{{ meal.dinner.name }}</h3>
								  <hr>
								  <div class="meal-information">
									<p>Servings: {{ meal.dinner.servings|default:1|floatformat:0 }}</p>
									<p>Calories: {{ meal.dinner.calories }} kcal</p>
									<p>Protein: {{ meal.dinner.protein }} g</p>
									<p>Fat: {{ meal.dinner.fat }} g</p>
									<p>Carbs: {{ meal.dinner.carbs }} g</p>
								  </div>
								  <hr>
								  <div class="view-recipe_container">
									<p><a href="{{ meal.dinner.instructions_link }}" target="_blank"><i class='bx bx-search-alt-2'></i>View Recipe</a></p>
								  </div>
								</div>
							  </div>
							</div>
						  </div>
						{% endfor %}
					  {% endwith %}
					{% endif %}
				  </div>
				  {% endif %}
				
	</div>
	</div>
	<script src="../../static/js/home.js"></script>
	<script src="../../static/js/mealplanform.js"></script>
</body>
</html>